#include <iostream>
#include <cstdlib>
#include "header.hpp"

using namespace std;

Pingpong::Pingpong(int L3):Ball(L3){}	// h mpala pingpong , einai mia mpala me durability L3
Pingpong::~Pingpong(){}

Type Pingpong::get_type(){	// gurizei ton tupo tis mpalas
	return PINGPONG;
}

void Pingpong::hit(){
	int x;

	cout << "Trying to hit a Pingpong's ball" << endl;//de zhtatai. gia na kseroume se kathe epanalipsi
	// ti tupou mpala xtupame. gia logous katanoisis tis leitourgias tou programmatos 
	if (state == BROKEN){	// an i mpala exei spasei simainei oti exei vgei apo to paixnidi
		cout << "The ball is broken" << endl;	
		return;	// ara de mporw na ti xtupisw kai den ekteleitai kamia alli leitourgia
	}
	if (state == MISSING){	// an i mpala exei xathei simainei oti exei vgei apo to paixnidi
		cout << "You cannot hit a hidden ball!" << endl;
		return;	// ara de mporw na ti xtupisw kai den ekteleitai kamia alli leitourgia
	}
	if (state == FTHARMENI){	// an i mpala einai ftharmeni	
		cout << "Plof!" << endl;// ektupwnw plof alla frontizw na mi meiwsw to durability gt einai hdh mhden
		return;
	}
	cout << "Tsaf!" << endl;// an den isxuei tipota apo ta parapanw, ektupwnw tsaf, dld oti xtupithike i mpala
	durability--;	// kai meiwnw kata ena to durability
	if (durability == 0) state = FTHARMENI;// an auto ginei mhden h mpala einai ftharmeni
	x = rand() % 10;
	if (x==6) state = MISSING;	// tuxaia mia mpala,  meta apo ena xtupima mporei na eksafanistei
	if (x==9) state = BROKEN;	// tuxaia mia mpala pingpong,  meta apo ena xtupima mporei na spasei
}

void Pingpong::rest(){
	if (state != MISSING && state != BROKEN) {
		durability++;
		if (state == FTHARMENI) state = OK;
	}
}
